angular.module("smni.controllers",[]).controller("HomeCtrl",function(t,n,o,a,e,i,r,s,c){t.smniLoading=!0,t.streamDisabled=!0,t.isExpanded=!0,t.hasHeaderFabLeft=!1,t.hasHeaderFabRight=!1;var l={location:"no",clearcache:"no",toolbar:"no"};t.sourceRtmp=function(){o.open("rtmp://smni.live-s.cdn.bitgravity.com/cdn-live/_definst_/smni/live/feed001","_system",l)},e(function(){i.slideUp({selector:".slide-up"})},300),t.smniRefresh=function(){t.feeds=[],e(function(){t.facebookFeeds()},700)},t.facebookFeeds=function(){"undefined"!=typeof analytics&&analytics.trackView("SMNI Main"),e(function(){s.get().$promise.then(function(n){t.feeds=n.data,t.smniError=!1,t.streamDisabled=!1,t.smniLoading=!1,e(function(){i.fadeSlideInRight({starVelocity:3e3}),r.displayEffect()},1e3)},function(n){console.log(n),t.smniError="An error occured: "+n+". <br>Cannot connect to Facebook. <br>Please check your internet connection.",t.streamDisabled=!0,t.smniLoading=!1,t.feeds=[]})["finally"](function(){t.$broadcast("scroll.refreshComplete")})},5e3)},t.openLink=function(t){void 0!==typeof analytics&&analytics.trackEvent("Button","Open Real Link","Open Link"),o.open("https://www.facebook.com/"+t,"_blank",l)},t.share=function(t,n,o){c.share(t,n,o).then(function(t){console.log(t)},function(t){console.log(t)})},t.shareViaTwitter=function(t,n,o){void 0!==typeof analytics&&analytics.trackEvent("Button","Twitter","shareViaTwitter"),c.shareViaTwitter(t,null,o)},t.shareViaGooglePlus=function(t,n,o){void 0!==typeof analytics&&analytics.trackEvent("Button","GooglePlus","shareViaGooglePlus"),c.shareVia("com.google.android.apps.plus",t,null,o)},t.shareViaWhatsApp=function(t,n,o){void 0!==typeof analytics&&analytics.trackEvent("Button","WhatsApp","shareViaWhatsApp"),c.shareViaWhatsApp(t,null,o,function(){console.log("share ok")},function(t){alert(t)})},t.shareViaEmail=function(t){void 0!==typeof analytics&&analytics.trackEvent("Button","Email","shareViaEmail"),c.shareViaEmail(t,"",null,null,null,function(t){},function(t){})},t.shareViaSMS=function(t){void 0!==typeof analytics&&analytics.trackEvent("Button","SMS","shareViaSMS"),c.shareViaSMS(t,null,function(t){console.log("ok: "+t)},function(t){alert("error: "+t)})},n.ready(t.facebookFeeds())}).controller("ProgramsCtrl",function(t,n,o,a,e,i){"undefined"!=typeof analytics&&analytics.trackView("Programs"),t.programs=o.all(),a(function(){e.fadeSlideInRight({startVelocity:3e3}),i.displayEffect()},1e3),a(function(){e.blinds({startVelocity:3e3})},1e3)}).controller("ProgramDetailCtrl",function(t,n,o,a,e,i,r,s,c){t.init=function(){i(function(){r.slideUp({selector:".slide-up"})},300),t.programItem(),t.program=a.get(n.programId),t.programTitle(),"undefined"!=typeof analytics&&analytics.trackView("Progam ID: "+n.programId)};var l=n.programId;t.programTitle=function(){t.program=a.get(n.programId)};var u=!1;t.randomize=function(){t.smniLoading=!0,t.rankedList=[],i(function(){void 0!==typeof analytics&&analytics.trackEvent("Button","Shuffle List","Shuffle"),t.programItem(!0)},700)},t.reload=function(){t.smniLoading=!0,t.rankedList=[],i(function(){void 0!==typeof analytics&&analytics.trackEvent("Button","Un-shuffle List","Un-Shuffled"),t.programItem(!1)},700)},t.smniRefresh=function(){t.rankedList=[],i(function(){void 0!==typeof analytics&&analytics.trackEvent("Refesher","Refresh","Pull to refresh"),t.programItem(!1)},700)},t.programItem=function(n){var a={type:"playlistItems",maxResults:"50",playlistId:l};t.rankedList=[],u=n,i(function(){o.get(a).$promise.then(function(n){t.programItems=n.items,t.smniLoading=!1,t.smniError=!1;var o=1;u===!0?(t.reloadDisabled=!1,angular.forEach(t.programItems,function(n){t.rankedList.push({item:n,rank:.5-c.Math.random()})})):(t.reloadDisabled=!0,angular.forEach(t.programItems,function(n){t.rankedList.push({item:n,rank:o++})})),i(function(){r.fadeSlideInRight({startVelocity:3e3})},300),i(function(){s.displayEffect()},700)},function(n){console.log(n),t.smniError="An error occured: "+n+". <br>Cannot connect to Youtube. <br>Please check your internet connection.",t.smniLoading=!1,t.rankedList=[]})["finally"](function(){t.$broadcast("scroll.refreshComplete")})},3e3)},t.init()}).controller("playVideoCtrl",function(t,n,o,a,e,i,r,s){var c=n.videoId;t.isExpanded=!0,t.hasHeaderFabLeft=!1,t.hasHeaderFabRight=!1,t.init=function(){t.smniLoading=!0,t.theVideo(),"undefined"!=typeof analytics&&analytics.trackView("Youtube Video")},t.theVideo=function(){var n={type:"videos",id:c};i(function(){o.get(n).$promise.then(function(n){t.playVideoId=c,t.videoInfo=n.items,t.smniLoading=!1,i(function(){s.slideUp({selector:".slide-up"})},700),r.displayEffect()},function(t){console.log(t),alert("Error: "+t)})},3e3)},t.$on("youtube.player.ready",function(t,n){}),t.playerVars={controls:2,autoplay:0,showinfo:0};var l={location:"no",clearcache:"no",toolbar:"no"};t.openLink=function(){void 0!==typeof analytics&&analytics.trackEvent("Button","Open Youtube","Open Link"),a.open("https://www.youtube.com/watch?v="+c,"_blank",l)},t.shareViaTwitter=function(){void 0!==typeof analytics&&analytics.trackEvent("Button","Twitter","YT shareViaTwitter"),e.shareViaTwitter("https://www.youtube.com/watch?v="+c,null,"https://www.youtube.com/watch?v="+c)},t.shareViaGooglePlus=function(){void 0!==typeof analytics&&analytics.trackEvent("Button","GooglePlus","YT shareViaGooglePlus"),e.shareVia("com.google.android.apps.plus","https://www.youtube.com/watch?v="+c,null,"https://www.youtube.com/watch?v="+c)},t.shareViaWhatsApp=function(){void 0!==typeof analytics&&analytics.trackEvent("Button","WhatsApp","YT shareViaWhatsApp"),e.shareViaWhatsApp("https://www.youtube.com/watch?v="+c,null,"https://www.youtube.com/watch?v="+c,function(){console.log("share ok")},function(t){alert(t)})},t.shareViaEmail=function(){void 0!==typeof analytics&&analytics.trackEvent("Button","Email","YT shareViaEmail"),e.shareViaEmail("Watch and be blessed! https://www.youtube.com/watch?v="+c,"",null,null,null,function(){},function(t){})},t.shareViaSMS=function(){void 0!==typeof analytics&&analytics.trackEvent("Button","SMS","shareViaSMS"),e.shareViaSMS("https://www.youtube.com/watch?v="+c,null,function(){console.log("ok: "+c)},function(){alert("error: "+c)})},t.init()}).controller("videoListCtrl",function(t,n,o){t.getVideosFrmPrograms=function(){var t={type:"playlistItems",maxResults:"20",playlistId:"PLBvNelqMoACDq83y9R3IKvJlQLX3uoCJ7"};n.get(t).$promise.then(function(t){$log.info(t)},function(t){console.log(t)})},t.getVideosFrmPrograms()}).controller("AboutCtrl",function(t,n,o,a,e,i){var r={location:"no",clearcache:"no",toolbar:"no"};"undefined"!=typeof analytics&&analytics.trackView("About"),t.like=function(){a.open("https://www.facebook.com/SMNIApp/","_blank",r)},o(function(){e.displayEffect()},300)});