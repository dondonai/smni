angular.module("smni",["ionic","smni.controllers","smni.services","ngCordova","ionic-material","youtube-embed"]).run(["$ionicPlatform",function(t){t.ready(function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault(),"undefined"!=typeof analytics?analytics.startTrackerWithId("UA-19600826-19"):console.log("Google Analytics Unavailable")})}]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(t,o,a){a.backButton.previousTitleText(!1).text(""),t.state("tab",{url:"/tab","abstract":!0,templateUrl:"templates/tabs.html"}).state("tab.home",{url:"/home",views:{"tab-home":{templateUrl:"templates/tab-home.html",controller:"HomeCtrl"}}}).state("tab.programs",{url:"/programs",views:{"tab-programs":{templateUrl:"templates/tab-programs.html",controller:"ProgramsCtrl"}}}).state("tab.program-detail",{url:"/programs/:programId",views:{"tab-programs":{templateUrl:"templates/program-detail.html",controller:"ProgramDetailCtrl"}}}).state("tab.video",{url:"/video/:videoId",views:{"tab-programs":{templateUrl:"templates/video.html",controller:"playVideoCtrl"}}}).state("tab.about",{url:"/about",views:{"tab-about":{templateUrl:"templates/tab-about.html",controller:"AboutCtrl"}}}),o.otherwise("/tab/home")}]),angular.module("smni.controllers",[]).controller("HomeCtrl",["$scope","$ionicPlatform","$cordovaInAppBrowser","$ionicPopup","$timeout","ionicMaterialMotion","ionicMaterialInk","FacebookFactory","$cordovaSocialSharing",function(t,o,a,e,n,i,r,l,s){t.smniLoading=!0,t.streamDisabled=!0,t.isExpanded=!0,t.hasHeaderFabLeft=!1,t.hasHeaderFabRight=!1;var c={location:"no",clearcache:"no",toolbar:"no"};t.sourceRtmp=function(){a.open("rtmp://smni.live-s.cdn.bitgravity.com/cdn-live/_definst_/smni/live/feed001","_system",c)},n(function(){i.slideUp({selector:".slide-up"})},300),t.smniRefresh=function(){t.feeds=[],n(function(){t.facebookFeeds()},700)},t.facebookFeeds=function(){"undefined"!=typeof analytics&&analytics.trackView("SMNI Main"),n(function(){l.get().$promise.then(function(o){t.feeds=o.data,t.smniError=!1,t.streamDisabled=!1,t.smniLoading=!1,n(function(){i.fadeSlideInRight({starVelocity:3e3}),r.displayEffect()},1e3)},function(o){console.log(o),t.smniError="An error occured: "+o+". <br>Cannot connect to Facebook. <br>Please check your internet connection.",t.streamDisabled=!0,t.smniLoading=!1,t.feeds=[]})["finally"](function(){t.$broadcast("scroll.refreshComplete")})},5e3)},t.openLink=function(t){void 0!==typeof analytics&&analytics.trackEvent("Button","Open Real Link","Open Link"),a.open("https://www.facebook.com/"+t,"_blank",c)},t.share=function(t,o,a){s.share(t,o,a).then(function(t){console.log(t)},function(t){console.log(t)})},t.shareViaTwitter=function(t,o,a){void 0!==typeof analytics&&analytics.trackEvent("Button","Twitter","shareViaTwitter"),s.shareViaTwitter(t,null,a)},t.shareViaGooglePlus=function(t,o,a){void 0!==typeof analytics&&analytics.trackEvent("Button","GooglePlus","shareViaGooglePlus"),s.shareVia("com.google.android.apps.plus",t,null,a)},t.shareViaWhatsApp=function(t,o,a){void 0!==typeof analytics&&analytics.trackEvent("Button","WhatsApp","shareViaWhatsApp"),s.shareViaWhatsApp(t,null,a,function(){console.log("share ok")},function(t){alert(t)})},t.shareViaEmail=function(t){void 0!==typeof analytics&&analytics.trackEvent("Button","Email","shareViaEmail"),s.shareViaEmail(t,"",null,null,null,function(t){},function(t){})},t.shareViaSMS=function(t){void 0!==typeof analytics&&analytics.trackEvent("Button","SMS","shareViaSMS"),s.shareViaSMS(t,null,function(t){console.log("ok: "+t)},function(t){alert("error: "+t)})},o.ready(t.facebookFeeds())}]).controller("ProgramsCtrl",["$scope","$stateParams","ProgramListFactory","$timeout","ionicMaterialMotion","ionicMaterialInk",function(t,o,a,e,n,i){"undefined"!=typeof analytics&&analytics.trackView("Programs"),t.programs=a.all(),e(function(){n.fadeSlideInRight({startVelocity:3e3}),i.displayEffect()},1e3),e(function(){n.blinds({startVelocity:3e3})},1e3)}]).controller("ProgramDetailCtrl",["$scope","$stateParams","ProgramsFactory","ProgramListFactory","$ionicPopup","$timeout","ionicMaterialMotion","ionicMaterialInk","$window",function(t,o,a,e,n,i,r,l,s){t.init=function(){i(function(){r.slideUp({selector:".slide-up"})},300),t.programItem(),t.program=e.get(o.programId),t.programTitle(),"undefined"!=typeof analytics&&analytics.trackView("Progam ID: "+o.programId)};var c=o.programId;t.programTitle=function(){t.program=e.get(o.programId)};var u=!1;t.randomize=function(){t.smniLoading=!0,t.rankedList=[],i(function(){void 0!==typeof analytics&&analytics.trackEvent("Button","Shuffle List","Shuffle"),t.programItem(!0)},700)},t.reload=function(){t.smniLoading=!0,t.rankedList=[],i(function(){void 0!==typeof analytics&&analytics.trackEvent("Button","Un-shuffle List","Un-Shuffled"),t.programItem(!1)},700)},t.smniRefresh=function(){t.rankedList=[],i(function(){void 0!==typeof analytics&&analytics.trackEvent("Refesher","Refresh","Pull to refresh"),t.programItem(!1)},700)},t.programItem=function(o){var e={type:"playlistItems",maxResults:"50",playlistId:c};t.rankedList=[],u=o,i(function(){a.get(e).$promise.then(function(o){t.programItems=o.items,t.smniLoading=!1,t.smniError=!1;var a=1;u===!0?(t.reloadDisabled=!1,angular.forEach(t.programItems,function(o){t.rankedList.push({item:o,rank:.5-s.Math.random()})})):(t.reloadDisabled=!0,angular.forEach(t.programItems,function(o){t.rankedList.push({item:o,rank:a++})})),i(function(){r.fadeSlideInRight({startVelocity:3e3})},300),i(function(){l.displayEffect()},700)},function(o){console.log(o),t.smniError="An error occured: "+o+". <br>Cannot connect to Youtube. <br>Please check your internet connection.",t.smniLoading=!1,t.rankedList=[]})["finally"](function(){t.$broadcast("scroll.refreshComplete")})},3e3)},t.init()}]).controller("playVideoCtrl",["$scope","$stateParams","ProgramsFactory","$cordovaInAppBrowser","$cordovaSocialSharing","$timeout","ionicMaterialInk","ionicMaterialMotion",function(t,o,a,e,n,i,r,l){var s=o.videoId;t.isExpanded=!0,t.hasHeaderFabLeft=!1,t.hasHeaderFabRight=!1,t.init=function(){t.smniLoading=!0,t.theVideo(),"undefined"!=typeof analytics&&analytics.trackView("Youtube Video")},t.theVideo=function(){var o={type:"videos",id:s};i(function(){a.get(o).$promise.then(function(o){t.playVideoId=s,t.videoInfo=o.items,t.smniLoading=!1,i(function(){l.slideUp({selector:".slide-up"})},700),i(function(){l.fadeSlideInRight()},3e3),r.displayEffect()},function(t){console.log(t),alert("Error: "+t)})},3e3)},t.$on("youtube.player.ready",function(t,o){}),t.playerVars={controls:2,autoplay:0,showinfo:0};var c={location:"no",clearcache:"no",toolbar:"no"};t.openLink=function(){void 0!==typeof analytics&&analytics.trackEvent("Button","Open Youtube","Open Link"),e.open("https://www.youtube.com/watch?v="+s,"_blank",c)},t.shareViaTwitter=function(){void 0!==typeof analytics&&analytics.trackEvent("Button","Twitter","YT shareViaTwitter"),n.shareViaTwitter("https://www.youtube.com/watch?v="+s,null,"https://www.youtube.com/watch?v="+s)},t.shareViaFacebook=function(){void 0!==typeof analytics&&analytics.trackEvent("Button","Facebook","YT shareViaFacebook"),n.shareViaFacebook("https://www.youtube.com/watch?v="+s,null,"https://www.youtube.com/watch?v="+s)},t.shareViaGooglePlus=function(){void 0!==typeof analytics&&analytics.trackEvent("Button","GooglePlus","YT shareViaGooglePlus"),n.shareVia("com.google.android.apps.plus","https://www.youtube.com/watch?v="+s,null,"https://www.youtube.com/watch?v="+s)},t.shareViaWhatsApp=function(){void 0!==typeof analytics&&analytics.trackEvent("Button","WhatsApp","YT shareViaWhatsApp"),n.shareViaWhatsApp("https://www.youtube.com/watch?v="+s,null,"https://www.youtube.com/watch?v="+s,function(){console.log("share ok")},function(t){alert(t)})},t.shareViaEmail=function(){void 0!==typeof analytics&&analytics.trackEvent("Button","Email","YT shareViaEmail"),n.shareViaEmail("Watch and be blessed! https://www.youtube.com/watch?v="+s,"",null,null,null,function(){},function(t){})},t.shareViaSMS=function(){void 0!==typeof analytics&&analytics.trackEvent("Button","SMS","shareViaSMS"),n.shareViaSMS("https://www.youtube.com/watch?v="+s,null,function(){console.log("ok: "+s)},function(){alert("error: "+s)})},t.init()}]).controller("videoListCtrl",["$scope","ProgramsFactory","$stateParams",function(t,o,a){t.getVideosFrmPrograms=function(){var t={type:"playlistItems",maxResults:"20",playlistId:"PLBvNelqMoACDq83y9R3IKvJlQLX3uoCJ7"};o.get(t).$promise.then(function(t){$log.info(t)},function(t){console.log(t)})},t.getVideosFrmPrograms()}]).controller("AboutCtrl",["$scope","$stateParams","$timeout","$cordovaInAppBrowser","ionicMaterialInk","ionicMaterialMotion",function(t,o,a,e,n,i){var r={location:"no",clearcache:"no",toolbar:"no"};"undefined"!=typeof analytics&&analytics.trackView("About"),t.hideNavBar=function(){var t=document.getElementsByClassName("title");angular.element(t).css("left","0")},t.$on("$ionicView.enter",function(o,a){t.hideNavBar()}),t.like=function(){e.open("https://www.facebook.com/SMNIApp/","_blank",r)},a(function(){n.displayEffect()},300)}]),angular.module("smni.services",["ngResource"]).factory("FacebookFactory",["$resource",function(t){return t("https://graph.facebook.com/v2.5/105414913766/:type",{type:"feed",limit:"10",access_token:"1054156781281122|WK64HjQfUfCnxjgPCZZ2Zw8prWM"})}]).factory("ProgramsFactory",["$resource",function(t){return t("https://www.googleapis.com/youtube/v3/:type",{type:"playlists",part:"snippet",maxResults:"50",channelId:"UCgFwzkl-EM3p1W3oDQe5Wow",key:"AIzaSyBSPBlypyNRw50RH-w2qEvkIBATE-5oufY"})}]).factory("ProgramListFactory",function(){var t=[{id:0,playlistid:"PLBvNelqMoACDhLuh6Ohb9S7dPg70U5tCT",name:"Give Us This Day",img:"img/give-us-this-day.jpg"},{id:1,playlistid:"PLBvNelqMoACAFHwRk8URhyiyDnHkBR6k9",name:"Gospel of The Kingdom",img:"img/the-gospel-of-the-kingdom.jpg"},{id:2,playlistid:"PLBvNelqMoACDq83y9R3IKvJlQLX3uoCJ7",name:"Powerline",img:"img/powerline.jpg"},{id:3,playlistid:"PLBvNelqMoACDSkyJmLsOSVvmJjPbGwcA_",name:"Sounds of Worship",img:"img/sounds-of-worship.jpg"},{id:4,playlistid:"PLBvNelqMoACCKcUBQE3s9Q4vnwMELszDu",name:"iTestify",img:"img/itestify.jpg"},{id:5,playlistid:"PLBvNelqMoACB6YIMy7tZRrI4pysW3e-sU",name:"Kingdom Music",img:"img/kingdom-music.jpg"}];return{all:function(){return t},get:function(o){for(var a=0;a<t.length;a++)if(t[a].playlistid===o)return t[a];return null}}});